services:
  - type: web
    name: nirabhi-backend
    env: python
    buildCommand: "cd backend && pip install -r requirements.txt"
    startCommand: "cd backend && python main.py"
    plan: free
    envVars:
      - key: ENVIRONMENT
        value: production
      - key: PORT
        value: 8000
      - key: DEBUG
        value: false

  - type: web
    name: nirabhi-frontend
    env: node
    buildCommand: "cd frontend && npm install --legacy-peer-deps && npm run build"
    startCommand: "cd frontend && npm run build && npx serve -s build -l 3000"
    plan: free
    staticPublishPath: frontend/build
